<form (ngSubmit)="onSubmit(checkoutForm)" #checkoutForm="ngForm">
  <!-- Billing Address Section -->
  <div class="form-group">
    <label for="billingCountry">Country *:</label>
    <input type="text" id="billingCountry" name="billingCountry" ngModel [(ngModel)]="checkoutFormData.billingCountry" required class="form-input">
  </div>

  <!-- Use as Shipping Address Checkbox -->
  <div class="form-group">
    <label for="useAsShippingAddress">Use as shipping address:</label>
    <input type="checkbox" id="useAsShippingAddress" name="useAsShippingAddress" ngModel [(ngModel)]="checkoutFormData.useAsShippingAddress" (change)="onUseAsShippingAddressChange()" class="form-checkbox">
  </div>

  <!-- Customer Type Selection -->
  <div class="form-group">
    <label for="customerType">Customer Type:</label>
    <select id="customerType" name="customerType" ngModel required class="form-select">
      <option value="person">Individual</option>
      <option value="organisation">Organization</option>
    </select>
  </div>

  <!-- Personal Information Section (Displayed only for 'person' customer type) -->
  <div *ngIf="checkoutForm.value.customerType === 'person'" class="form-group">
    <label for="name">Full Name *:</label>
    <input type="text" id="name" name="name" ngModel [(ngModel)]="checkoutFormData.name" required class="form-input">
  </div>

  <!-- Organization Information Section (Displayed only for 'organisation' customer type) -->
  <div *ngIf="checkoutForm.value.customerType === 'organisation'" class="form-group">
    <label for="organisationName">Name (required):</label>
    <input type="text" id="organisationName" name="organisationName" ngModel [(ngModel)]="checkoutFormData.organizationName" required class="form-input">

    <label for="organisationNumber">Organization Number:</label>
    <input type="text" id="organisationNumber" name="organisationNumber" ngModel [(ngModel)]="checkoutFormData.organizationNumber" required class="form-input">
  </div>

  <!-- Street Address Section -->
  <div class="form-group">
    <label for="streetAddress">Street *:</label>
    <input type="text" id="streetAddress" name="streetAddress" ngModel [(ngModel)]="checkoutFormData.streetAddress" required class="form-input">
  </div>

  <!-- Postal Code Section -->
  <div class="form-group">
    <label for="postCode">Postal Code (XXXXX) *:</label>
    <input type="text" id="postCode" name="postCode" ngModel [(ngModel)]="checkoutFormData.postCode" required class="form-input">
  </div>

  <!-- City Section -->
  <div class="form-group">
    <label for="city">City *:</label>
    <input type="text" id="city" name="city" ngModel [(ngModel)]="checkoutFormData.city" required class="form-input">
  </div>

  <!-- Shipping Address (Only shown when checkbox is not checked) -->
  <div *ngIf="!checkoutFormData.useAsShippingAddress">
    <h3>Shipping Address</h3>

    <!-- Shipping Name -->
    <div class="form-group">
      <label for="shippingName">Name *:</label>
      <input type="text" id="shippingName" name="shippingName" ngModel [(ngModel)]="checkoutFormData.name" required class="form-input">
    </div>

    <!-- Shipping Country -->
    <div class="form-group">
      <label for="shippingCountry">Country *:</label>
      <input type="text" id="shippingCountry" name="shippingCountry" ngModel [(ngModel)]="checkoutFormData.shippingCountry" required class="form-input">
    </div>

    <!-- Shipping Street Address -->
    <div class="form-group">
      <label for="shippingStreetAddress">Street *:</label>
      <input type="text" id="shippingStreetAddress" name="shippingStreetAddress" ngModel [(ngModel)]="checkoutFormData.shippingStreetAddress" required class="form-input">
    </div>

    <!-- Shipping Postal Code -->
    <div class="form-group">
      <label for="shippingPostCode">Postal Code *:</label>
      <input type="text" id="shippingPostCode" name="shippingPostCode" ngModel [(ngModel)]="checkoutFormData.shippingPostCode" required class="form-input">
    </div>

    <!-- Shipping City -->
    <div class="form-group">
      <label for="shippingCity">City *:</label>
      <input type="text" id="shippingCity" name="shippingCity" ngModel [(ngModel)]="checkoutFormData.shippingCity" required class="form-input">
    </div>
  </div>

  <!-- Order Details Section (Pre-filled or dynamically generated) -->
  <div class="order-details" *ngFor="let product of this.data">
    <h3>Order Details</h3>
    <p>Product: {{ product.productName }}</p>
    <p>Quantity: {{ product.quantity }}</p>
    <p>Unit Price: {{ product.price }} SEK</p>
    <p>VAT: 25%</p>
    <p>Total Price: {{ (product.price * product.quantity) }} SEK</p>
  </div>

  <!-- Submit Button for Payment -->
  <button type="submit" class="btn-primary">Proceed to Payment</button>
</form>

<!-- Container for Klarna HTML (Possibly dynamically inserted payment method HTML) -->
<div id="checkout-container" [innerHTML]="klarnaHtml"></div>



  


  


  